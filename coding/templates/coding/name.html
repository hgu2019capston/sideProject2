{% extends "base.html" %}

{% block head %}
	<title>Code Form[FBV]</title>
{% endblock %}
{% block style %}
{% endblock %}
{% block content %}
<div class="container">
   <div class="jumbotron">
      <h1 class="text-center display-4">Contact Form[FBV]</h1>
      <p class="lead text-center">This is sample example for integration of AJAX with Django</p>
    </div>
    <div class="row justify-content-center align-items-center">
      <div class="col-sm-6 ">
      	<form id = "codeForm" method= "POST">{% csrf_token %}
      		{{ form.as_p }}
      		<input type="submit" name="code-submit" class="btn btn-primary" />
      	</form>
      </div>
   </div>
   </div>
</div>
{% endblock %}
{% block script %}
<script type="text/javascript">
$(document).ready(function(){
   $("#codeForm").submit(function(e){
	// prevent from normal form behaviour
      	e.preventDefault();
    	// serialize the form data  
      	var serializedData = $(this).serialize();
      	$.ajax({
      		type : 'POST',
      		url :  "{% url 'code_submit' %}",
      		data : serializedData,
      		success : function(response){
			//reset the form after successful submit
      			$("#codeForm")[0].reset(); 
      		},
      		error : function(response){
      			console.log(response)
      		}
      	});
   });
});
</script>
{% endblock %}   
